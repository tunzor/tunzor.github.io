<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Quick Tip: List docker images sorted by size - tunzor</title>
  <meta name="description" content="The docker image ls command has an option for filtering output but what if we want to sort the images to find the really hefty ones? You know, the ones that might need to go the way of Old Yeller.
Huh? What&rsquo;s that, docker? You can&rsquo;t do that.
If you want something done right&hellip;
It ain&rsquo;t pretty but it works.
docker image ls --format &quot;{{.Repository}}:{{.Tag}} {{.Size}}&quot; | \ awk &#39;{if ($2~/GB/) print substr($2, 1, length($2)-2) * 1000 &quot;MB - &quot; $1 ; else print $2 &quot; - &quot; $1 }&#39; | \ sed &#39;/^0/d&#39; | \ sort -n   Side Note">
  <meta name="author" content="Anthony"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "tunzor",
    
    "url": "https:\/\/tunzor.github.io"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/tunzor.github.io"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/tunzor.github.io",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/tunzor.github.io\/posts\/docker-list-images-by-size\/",
          "name": "Quick tip list docker images sorted by size"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Anthony"
  },
  "headline": "Quick Tip: List docker images sorted by size",
  "description" : "The docker image ls command has an option for filtering output but what if we want to sort the images to find the really hefty ones? You know, the ones that might need to go the way of Old Yeller.\nHuh? What\x26rsquo;s that, docker? You can\x26rsquo;t do that.\nIf you want something done right\x26hellip;\nIt ain\x26rsquo;t pretty but it works.\ndocker image ls --format \x26quot;{{.Repository}}:{{.Tag}} {{.Size}}\x26quot; | \\ awk \x27{if ($2~\/GB\/) print substr($2, 1, length($2)-2) * 1000 \x26quot;MB - \x26quot; $1 ; else print $2 \x26quot; - \x26quot; $1 }\x27 | \\ sed \x27\/^0\/d\x27 | \\ sort -n   Side Note",
  "inLanguage" : "en",
  "wordCount":  499 ,
  "datePublished" : "2019-12-16T10:31:48",
  "dateModified" : "2019-12-16T10:31:48",
  "image" : "https:\/\/tunzor.github.io\/img\/me.jpg",
  "keywords" : [ "quick-tip, docker" ],
  "mainEntityOfPage" : "https:\/\/tunzor.github.io\/posts\/docker-list-images-by-size\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/tunzor.github.io",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/tunzor.github.io\/img\/me.jpg",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Quick Tip: List docker images sorted by size" />
<meta property="og:description" content="The docker image ls command has an option for filtering output but what if we want to sort the images to find the really hefty ones? You know, the ones that might need to go the way of Old Yeller.
Huh? What&rsquo;s that, docker? You can&rsquo;t do that.
If you want something done right&hellip;
It ain&rsquo;t pretty but it works.
docker image ls --format &quot;{{.Repository}}:{{.Tag}} {{.Size}}&quot; | \ awk &#39;{if ($2~/GB/) print substr($2, 1, length($2)-2) * 1000 &quot;MB - &quot; $1 ; else print $2 &quot; - &quot; $1 }&#39; | \ sed &#39;/^0/d&#39; | \ sort -n   Side Note">
<meta property="og:image" content="https://tunzor.github.io/img/me.jpg" />
<meta property="og:url" content="https://tunzor.github.io/posts/docker-list-images-by-size/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="tunzor" />

  <meta name="twitter:title" content="Quick Tip: List docker images sorted by size" />
  <meta name="twitter:description" content="The docker image ls command has an option for filtering output but what if we want to sort the images to find the really hefty ones? You know, the ones that might need to go the way of Old Yeller. â€¦">
  <meta name="twitter:image" content="https://tunzor.github.io/img/me.jpg" />
  <meta name="twitter:card" content="summary" />
  <link href='https://tunzor.github.io/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta name="generator" content="Hugo 0.55.4" />
  <link rel="alternate" href="https://tunzor.github.io/index.xml" type="application/rss+xml" title="tunzor"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://tunzor.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" /><link rel="stylesheet" href="https://tunzor.github.io/css/syntax.css" /><link rel="stylesheet" href="https://tunzor.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://tunzor.github.io">tunzor</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        
          
            <li>
              <a title="about" href="/about">about</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="tunzor" href="https://tunzor.github.io">
            <img class="avatar-img" src="https://tunzor.github.io/img/me.jpg" alt="tunzor" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="posts-heading">
              
                <h1>Quick Tip: List docker images sorted by size</h1>
              
              
                <hr class="small">
              
              
              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        

<p>The <code>docker image ls</code> command has an <a href="https://docs.docker.com/engine/reference/commandline/images/#filtering" target=_blank>option for filtering output</a> but what if we want to sort the images to find the really hefty ones? You know, the ones that might need to go the way of Old Yeller.</p>

<p>Huh? What&rsquo;s that, docker? You <em>can&rsquo;t</em> do that.<br />
<em>If you want something done right&hellip;</em></p>

<p>It ain&rsquo;t pretty but it works.</p>

<pre><code>docker image ls --format &quot;{{.Repository}}:{{.Tag}} {{.Size}}&quot; | \
awk '{if ($2~/GB/) print substr($2, 1, length($2)-2) * 1000 &quot;MB - &quot; $1 ; else print $2 &quot; - &quot; $1 }' | \
sed '/^0/d' | \
sort -n
</code></pre>

<blockquote>
<p><strong>Side Note</strong><br />
This assumes that you don&rsquo;t have images &gt; 999GB.<br />
If you do &ndash; I pity you.</p>
</blockquote>

<p><strong>Old and busted</strong> (<code>docker image ls</code> sample output):</p>

<pre><code>python                                                                    alpine3.10          992aef1d798f        4 months ago        98.7MB
tomcat-fun                                                                alpine              2b7c7bec86f6        5 months ago        140MB
tomcat-fun                                                                latest              04af324bcf10        6 months ago        463MB
python                                                                    latest              7c5fd2af3815        11 months ago       927MB
python                                                                    alpine3.7           a94f1b57a462        11 months ago       81.1MB
tomcatweather                                                             latest              2353bdd18c19        13 months ago       315MB
tomcat                                                                    latest              ca9e2fccef98        13 months ago       463MB
tomcat                                                                    9-jre11-slim        8528526b1274        14 months ago       305MB
python                                                                    v1                  76031d3d6d90        14 months ago       74.2MB
python                                                                    3.6-alpine          a78e257617d1        14 months ago       74.2MB
busybox                                                                   latest              59788edf1f3e        14 months ago       1.15MB
</code></pre>

<p><strong>New hotness</strong> (sort script sample output):</p>

<pre><code>1MB - busybox:latest
74MB - python:3.6-alpine
74MB - python:v1
81MB - python:alpine3.7
98MB - python:alpine3.10
140MB - tomcat-fun:alpine
305MB - tomcat:9-jre11-slim
315MB - tomcatweather:latest
463MB - tomcat-fun:latest
463MB - tomcat:latest
927MB - python:latest
</code></pre>

<h2 id="explanation">Explanation</h2>

<p>This monster of Frankenstein needs a proper break down:</p>

<h3 id="1-list-docker-images-with-filter">1. List docker images with filter</h3>

<p>List all images but format the output to just show <code>imageName:tag size</code>.</p>

<pre><code>docker image ls --format &quot;{{.Repository}}:{{.Tag}} {{.Size}}&quot;
</code></pre>

<h3 id="2-convert-all-image-sizes-to-mb">2. Convert all image sizes to MB</h3>

<p>Check if the size (second argument - <code>$2</code>) is listed in gigabytes (<code>$2~/GB/</code> checks if <code>GB</code> is in <code>$2</code>) and convert it to megabytes by stripping the size unit (<code>substr($2, 1, length($2)-2)</code>) and multiplying it by 1000. Then append <code>MB</code> and the image name (<code>$1</code>).</p>

<pre><code>awk '{
    if ($2~/GB/) 
        print substr($2, 1, length($2)-2) * 1000 &quot;MB - &quot; $1 ; 
</code></pre>

<p>If it&rsquo;s not in gigabytes, assume it&rsquo;s in megabytes and print out the size and image name.</p>

<pre><code>    else 
        print $2 &quot; - &quot; $1
}'
</code></pre>

<h3 id="3-delete-any-lines-with-sizes-of-0-optional">3. Delete any lines with sizes of 0 (optional)</h3>

<p>I had some images that must have broken during creation so they&rsquo;re listed as 0. Feel free to omit this command.
Look for any line starting with <code>0</code> and delete it.</p>

<pre><code>sed '/^0/d'
</code></pre>

<h3 id="4-sort-from-smallest-to-largest">4. Sort from smallest to largest</h3>

<p>The <code>-n</code> flag is the important piece as it sorts it numerically rather than lexicographically/alphabetically. If you prefer, you can also pass the <code>-r</code> flag to reverse sort (largest to smallest).</p>

<pre><code>sort -n
</code></pre>

<pre><code># Lexicographically sorted
109MB - nginx:&lt;none&gt;
109MB - nginx:latest
11.4MB - gcr.io/cloud-builders/metadata:latest
113MB - simple-weather:1
117MB - ubuntu:16.04
1260MB - haskell:8.6
132MB - httpd:2.4

# Numerically sorted
11.4MB - gcr.io/cloud-builders/metadata:latest
109MB - nginx:&lt;none&gt;
109MB - nginx:latest
113MB - simple-weather:1
117MB - ubuntu:16.04
132MB - httpd:2.4
1260MB - haskell:8.6
</code></pre>

<p>Quick tip; long explanation.</p>


        
          <div class="blog-tags">
            
              <a href="https://tunzor.github.io/tags/quick-tip/">quick-tip</a>&nbsp;
            
              <a href="https://tunzor.github.io/tags/docker/">docker</a>&nbsp;
            
          </div>
        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=https%3a%2f%2ftunzor.github.io%2fposts%2fdocker-list-images-by-size%2f&amp;text=Quick%20Tip%3a%20List%20docker%20images%20sorted%20by%20size&amp;via=" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ftunzor.github.io%2fposts%2fdocker-list-images-by-size%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=https%3a%2f%2ftunzor.github.io%2fposts%2fdocker-list-images-by-size%2f&amp;title=Quick%20Tip%3a%20List%20docker%20images%20sorted%20by%20size" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2ftunzor.github.io%2fposts%2fdocker-list-images-by-size%2f&amp;title=Quick%20Tip%3a%20List%20docker%20images%20sorted%20by%20size" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2ftunzor.github.io%2fposts%2fdocker-list-images-by-size%2f&amp;title=Quick%20Tip%3a%20List%20docker%20images%20sorted%20by%20size" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2ftunzor.github.io%2fposts%2fdocker-list-images-by-size%2f&amp;description=Quick%20Tip%3a%20List%20docker%20images%20sorted%20by%20size" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  

              </div>
            </section>
        

        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://tunzor.github.io/posts/devops-tools-101-consul/" data-toggle="tooltip" data-placement="top" title="DevOps Tools 101 - Consul">&larr; Previous Post</a>
            </li>
          
          
        </ul>
      


      

    </div>
  </div>
</div>

      
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="https://github.com/tunzor" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://bitbucket.org/tunzor" title="Bitbucket">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-bitbucket fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://play.google.com/store/apps/developer?id=Tunzor" title="Google Play Apps">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-google-play fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/anthony-russo-toronto" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://www.youtube.com/toonie55" title="Youtube">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-youtube fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Anthony
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2019
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://tunzor.github.io">tunzor</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.55.4</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://tunzor.github.io/js/main.js"></script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://tunzor.github.io/js/load-photoswipe.js"></script>









    
  </body>
</html>

